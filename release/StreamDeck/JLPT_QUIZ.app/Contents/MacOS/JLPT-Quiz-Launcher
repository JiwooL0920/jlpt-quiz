#!/bin/bash

# Use absolute path for Stream Deck compatibility
QUIZ_PATH="/Users/jiwoolee/Project/jlpt-quiz/release/JLPT-Quiz"

# Stream Deck compatible iTerm2 launcher
export PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin

# Check if iTerm2 is available, fallback to Terminal
if command -v osascript >/dev/null 2>&1; then
    osascript -e "
    tell application \"iTerm\"
        try
            activate
            create window with default profile
            tell current session of current window
                write text \"clear && echo 'ðŸŽŒ JLPT Quiz - Stream Deck Launch' && echo '' && '$QUIZ_PATH'\"
            end tell
        on error
            tell application \"Terminal\"
                activate
                do script \"clear && echo 'ðŸŽŒ JLPT Quiz - Stream Deck Launch' && echo '' && '$QUIZ_PATH'\"
            end tell
        end try
    end tell
    "
else
    # Direct execution fallback
    "$QUIZ_PATH"
fi